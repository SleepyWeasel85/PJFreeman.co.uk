#!/usr/bin/env php
<?php
/**
 * Creates a new empty project using the blueprint-empty repository.
 *
 * PHP.Gt (http://php.gt)
 * @copyright Copyright â’¸ 2015 Bright Flair Ltd. (http://brightflair.com)
 * @license http://www.opensource.org/licenses/mit-license.php MIT
 */
use	Symfony\Component\Console\Input\InputDefinition;
use Symfony\Component\Console\Input\InputArgument;
use Symfony\Component\Console\Input\InputOption;
use Symfony\Component\Console\Input\ArgvInput;

require(__DIR__ . "/../vendor/autoload.php");

$definition = new InputDefinition([
	new InputArgument("approot", InputArgument::REQUIRED),
]);

try {
	$input = new ArgvInput($argv, $definition);
	$projectName = $input->getArgument("approot");
	// mkdir($projectName);
	exec("git clone https://github.com/BrightFlair/blueprint-empty "
		. $projectName);
	chdir($projectName);
	exec("rm -rf .git");
	passthru("~/.gt/composer.phar update");
	$pwd = getcwd();

	// Create new project with PHP.Gt in composer.json
	// Install via composer.

	echo "\nNew project $projectName created in $pwd\n\n";
	exit(0);
}
catch(Exception $e) {
	echo "\ncreate shell script usage:\n";
	echo $definition->getSynopsis();
	echo "\n\n";
	echo strip_tags($definition->asText());
	echo "\n";
	exit(1);
}
